#! /usr/bin/env bash

# file      : build/configure
# copyright : Copyright (c) 2009-2015 Code Synthesis Tools CC
# license   : GNU GPL v2; see accompanying LICENSE file

# $1  out file
#
# bld_root     - build root
# project_name - project name
#

source $bld_root/dialog.bash

$echo
$echo
$echo "configuring '$project_name'"
$echo
$echo

databases="mysql sqlite pgsql oracle mssql"

$echo
$echo "Please select the database you would like to use:"
$echo
$echo "(1) MySQL"
$echo "(2) SQLite"
$echo "(3) PostgreSQL"
$echo "(4) Oracle"
$echo "(5) Microsoft SQL Server"
$echo "(6) Dynamic multi-database support (all above databases)"
$echo

db_id=`read_option "$databases common"`

echo "db_id := $db_id" >$1

if [ $db_id != "common" ]; then
  source $scf_root/$db_id/configure
else
  # For multi-database support we configure every database.
  #
  for db in $databases; do
    source $scf_root/$db/configure
  done
fi
